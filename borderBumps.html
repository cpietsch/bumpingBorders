<!DOCTYPE html>
<html>
<head>
	<title>Border Bumps v.0.9.5</title>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable = no">
	
	<meta name="apple-mobile-web-app-capable" content="yes" />  
	<meta name="apple-mobile-web-app-status-bar-style" content="black" />

	<link rel="stylesheet" href="css/bump.css" />
	<link rel="stylesheet" href="lib/leaflet.css" />
	<!--[if lte IE 8]><link rel="stylesheet" href="../dist/leaflet.ie.css" /><![endif]-->
	
	<script type="text/javascript" src="lib/leaflet-src.js"></script>
	<script type="text/javascript" src="lib/d3.v2.js"></script>
	<script type="text/javascript" src="lib/d3.tsv.js"></script>
	<script type="text/javascript" src="lib/zepto.js"></script>
	<script type="text/javascript" src="lib/zepto.addon.js"></script>

	<script type="text/javascript" src="js/mercator.js"></script>
	
	<style>
		div#miniMap { background-image:url(img/overviewMap-215x180.png); width: 215px; height: 180px; left: 5px;}
		div#overviewRect { position:relative; top:0px; left:0px; border: 1px solid #ff6360; width:20px; height: 20px; }
	</style>
</head>

<body>
	<div id="map" ></div>
	<div id="sidebar">
		<div id="miniMap"><div id="overviewRect"></div></div>
		<div id="incidentHistory">
			
		</div>
	</div>

<script type="text/javascript" src="js/bump.js"></script>
<script type="text/javascript">

	// function MercatorMap(mapScreenWidth, mapScreenHeight, topLatitude, bottomLatitude, leftLongitude, rightLongitude) {
	var mercatorMap = new MercatorMap(215, 180, detailMapNorthEast.lat, detailMapSouthWest.lat, detailMapSouthWest.lng, detailMapNorthEast.lng);
	
	map.on('move', function(e) {
		var bounds = map.getBounds();
		var top = mercatorMap.getScreenY(bounds.getNorthEast().lat);
		var right = mercatorMap.getScreenX(bounds.getNorthEast().lng);
		var bottom = mercatorMap.getScreenY(bounds.getSouthWest().lat);
		var left = mercatorMap.getScreenX(bounds.getSouthWest().lng);
		var width = right - left;
		var height = bottom - top;
		d3.select('#overviewRect').style('top', top + 'px');
		d3.select('#overviewRect').style('left', left + 'px');
		d3.select('#overviewRect').style('width', width + 'px');
		d3.select('#overviewRect').style('height', height + 'px');
	});
	
</script>

</html>
